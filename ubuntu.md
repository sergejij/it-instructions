# Установка pass на Ubuntu

1. Должен быть установлен gpg.

2. Устанавливаем pass

`sudo apt install pass`

3. Создаем репозиторий pass

`pass init {username}`, где username это имя указанное при создании gpg ключа. 

Имя можно узнать командой `gpg --list-keys` 

4. Делаем из репозитория `~/.password-store`  git репозиторий, командой `pass git init`

5. Присоединяем созданный репозиторий к удаленному `git remote add origin {ssh link}`

### Автоматизация подгрузки паролей из удаленного репозитория с помощью Cron

1. Для вывода логов Cron в отдельный файл нужно выполнить следующие команды: 
- `vim /etc/rsyslog.d/50-default.conf`

- раскомментировать строку, начинающуюся с `#cron.*`

- сохранить файл и выполнить команду `sudo service rsyslog restart`

Теперь логи будут выводиться в файл `/var/log/cron.log`

2. Создать задачу для выполнения по расписанию
- Выполнить команду `crontab -e`

- В конце файла дописать (при необходимости изменить частоту запуска задачи) `*/5 * * * * git -C ~/.password-store pull >/dev/null 2>&1`

- Сохранить и закрыть файл. При закрытии файла должна появиться строка `crontab: installing new crontab`

В примере выше указанная частота обновления — 5 минут. Это значит, что задача будет выполняться в 00, 05, 10, 15 и тд минут


### Полезные команды pass

Посмотреть все сервисы - `pass`

Посмотреть пароль сервиса - `pass {servicename}`

Сгенерировать пароль с определенным  количеством символов для определного сервиса - `pass generate {servicename} 13` флаг  `-c` скопирует сгенерированый пароль в буфер.

Назначить пароль сервису - `pass insert {servicename}`

Назначить сервису несколько полей - `pass insert -m {servicename}`

Удалить пароль - `pass rm {servicename}`

Изменить пароль - `pass edit {servicename}`

Скопировать пароль не показывая его на экране - `pass -c {servicename}`


